  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (95.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (102.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (48.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (31.9ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (5.4ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateTeachers (20190201210343)
  [1m[35m (45.2ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (5.5ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateJoinTableStudentsTeachers (20190201210402)
  [1m[35m (44.7ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL)[0m
  â†³ db/migrate/20190201210402_create_join_table_students_teachers.rb:3
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210402')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 21:05:35', '2019-02-01 21:05:35')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/register" for 127.0.0.1 at 2019-02-02 05:08:40 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (No route matches [GET] "/api/register"):
  
actionpack (5.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2019-02-02 05:08:41 +0800
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:08:46 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
Completed 204 No Content in 428884ms (ActiveRecord: 0.0ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:16:11 +0800
  
ActionController::RoutingError (undefined method `before_filter' for ApiController:Class
Did you mean?  before_action):
  
app/controllers/api_controller.rb:2:in `<class:ApiController>'
app/controllers/api_controller.rb:1:in `<main>'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:16:29 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
Unpermitted parameter: :students
Unpermitted parameter: :students
Unpermitted parameters: :teacher, :students
Completed 204 No Content in 1841251ms (ActiveRecord: 0.0ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:47:15 +0800
  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP2/app/controllers/api_controller.rb:7: syntax error, unexpected keyword_or
      or not ((@json.has_key?('teache...
        ^
/Users/melvin/Desktop/GeekInsider-TAP2/app/controllers/api_controller.rb:8: syntax error, unexpected keyword_or, expecting ')'
           or (@json.has_key?('student') a...
             ^
/Users/melvin/Desktop/GeekInsider-TAP2/app/controllers/api_controller.rb:8: syntax error, unexpected ')', expecting keyword_end):
  
app/controllers/api_controller.rb:7: syntax error, unexpected keyword_or
app/controllers/api_controller.rb:8: syntax error, unexpected keyword_or, expecting ')'
app/controllers/api_controller.rb:8: syntax error, unexpected ')', expecting keyword_end
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:47:55 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
Completed 500 Internal Server Error in 36ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `find_or_create' for #<ApiController:0x00007fe6dbdbc288>):
  
app/controllers/api_controller.rb:14:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 05:48:18 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` IS NULL LIMIT 1[0m
  â†³ (byebug):1
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:18
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ (byebug):1
Completed 204 No Content in 711053ms (ActiveRecord: 11.1ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:00:17 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 500 Internal Server Error in 40ms (ActiveRecord: 20.2ms)


  
NameError (uninitialized constant ApiController::StudentTeacher):
  
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:01:39 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 500 Internal Server Error in 42ms (ActiveRecord: 21.2ms)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'geekinsider-tap2_development.student_teachers' doesn't exist: SHOW FULL FIELDS FROM `student_teachers`):
  
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (157.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students_teachers` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:06:21', '2019-02-01 22:06:21')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students_teachers` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:06:21', '2019-02-01 22:06:21')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (102.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (16.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (168.1ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (82.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (49.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (47.4ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (5.3ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateTeachers (20190201210343)
  [1m[35m (48.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (48.2ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210402')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:06:55', '2019-02-01 22:06:55')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (41.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:07:04 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP2/app/models/teacher.rb:2: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  has_many :students, through :registrations
                               ^):
  
app/models/teacher.rb:2: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
app/controllers/api_controller.rb:36:in `find_or_create_teacher'
app/controllers/api_controller.rb:14:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:07:39 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 500 Internal Server Error in 46ms (ActiveRecord: 21.0ms)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'geekinsider-tap2_development.registrations' doesn't exist: SHOW FULL FIELDS FROM `registrations`):
  
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:08:20 +0800
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.3ms)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'geekinsider-tap2_development.registrations' doesn't exist: SHOW FULL FIELDS FROM `registrations`):
  
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (125.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (40.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students_teachers` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:11:50', '2019-02-01 22:11:50')[0m
  â†³ db/schema.rb:13
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.0ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students_teachers` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:11:50', '2019-02-01 22:11:50')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (112.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (15.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (116.4ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (133.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (52.2ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateTeachers (20190201210343)
  [1m[35m (48.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (48.6ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210402')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:12:27', '2019-02-01 22:12:27')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:13:11 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 500 Internal Server Error in 37ms (ActiveRecord: 18.1ms)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'geekinsider-tap2_development.registrations' doesn't exist: SHOW FULL FIELDS FROM `registrations`):
  
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (85.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (20.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:13:22', '2019-02-01 22:13:22')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-01 22:13:22', '2019-02-01 22:13:22')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:13:31 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  Parameters: {"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"], "api"=>{"teacher"=>"teacherken@gmail.com", "students"=>["studentjon@example.com", "studenthon@example.com"]}}
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
Completed 204 No Content in 51ms (ActiveRecord: 28.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:16:17 +0800
  
ActionController::RoutingError (No route matches [GET] "/api/commonstudents"):
  
actionpack (5.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:18:55 +0800
  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP2/app/controllers/api_controller.rb:55: syntax error, unexpected keyword_end, expecting end-of-input):
  
app/controllers/api_controller.rb:55: syntax error, unexpected keyword_end, expecting end-of-input
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:19:26 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
JSON::ParserError (A JSON text must at least contain two octets!):
  
app/controllers/api_controller.rb:38:in `parse_request'
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:19:42 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
JSON::ParserError (A JSON text must at least contain two octets!):
  
app/controllers/api_controller.rb:38:in `parse_request'
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:22:14 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:33
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:33
Completed 204 No Content in 65425ms (ActiveRecord: 6.1ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:25:13 +0800
Processing by ApiController#common_students as */*
Completed 500 Internal Server Error in 9633ms (ActiveRecord: 0.0ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `common_students'
app/controllers/api_controller.rb:33:in `common_students'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:25:36 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (2.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.8ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[36mStudent Load (1.1ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
Completed 204 No Content in 206ms (ActiveRecord: 28.4ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:25:43 +0800
Processing by ApiController#common_students as */*
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:33
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:33
Completed 204 No Content in 178525ms (ActiveRecord: 1.0ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:28:41 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.9ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
Completed 204 No Content in 4ms (ActiveRecord: 1.3ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:31:14 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:57
Completed 500 Internal Server Error in 61ms (Views: 0.1ms | ActiveRecord: 28.3ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:58:in `register_student_to_teacher'
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:31:41 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:57
Completed 204 No Content in 50ms (ActiveRecord: 28.9ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:31:55 +0800
Processing by ApiController#common_students as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:33
Completed 204 No Content in 7635ms (ActiveRecord: 0.4ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:32:12 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:57
Completed 422 Unprocessable Entity in 49ms (ActiveRecord: 27.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Student must exist, Teacher must exist):
  
app/controllers/api_controller.rb:57:in `register_student_to_teacher'
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:32:49 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:45
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-01 22:32:49', '2019-02-01 22:32:49')[0m
  â†³ app/controllers/api_controller.rb:45
  [1m[35m (121.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:45
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:50
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:53
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-01 22:32:49', '2019-02-01 22:32:49')[0m
  â†³ app/controllers/api_controller.rb:53
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:53
Completed 500 Internal Server Error in 166ms (ActiveRecord: 145.3ms)


  
NoMethodError (undefined method `id' for true:TrueClass):
  
app/controllers/api_controller.rb:58:in `register_student_to_teacher'
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:36:33 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 500 Internal Server Error in 17853ms (ActiveRecord: 18.4ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:59:in `register_student_to_teacher'
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:36:55 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:42
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 500 Internal Server Error in 7688ms (ActiveRecord: 18.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:59:in `register_student_to_teacher'
app/controllers/api_controller.rb:17:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:37:25 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.7ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:43
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:16
  [1m[36mStudent Load (0.8ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:51
Completed 500 Internal Server Error in 98354ms (ActiveRecord: 22.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:59:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:39:12 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:15
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:15
  [1m[36mTeacher Load (1.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
  [1m[36mStudent Load (1.0ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:51
Completed 500 Internal Server Error in 29049ms (ActiveRecord: 3.1ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:59:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:40:53 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:51
Completed 500 Internal Server Error in 31833ms (ActiveRecord: 17.8ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:59:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:15:in `each'
app/controllers/api_controller.rb:15:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 06:41:27 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:43
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[35m (46.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-01 22:41:33', '2019-02-01 22:41:33')[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:62
  [1m[35m (79.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:62
Completed 204 No Content in 9380ms (ActiveRecord: 160.1ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:41:43 +0800
Processing by ApiController#common_students as */*
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:34
Completed 204 No Content in 7502ms (ActiveRecord: 0.5ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:44:02 +0800
Processing by ApiController#common_students as */*
Completed 204 No Content in 34693ms (ActiveRecord: 0.0ms)


Started GET "/api/commonstudents" for 127.0.0.1 at 2019-02-02 06:44:39 +0800
Processing by ApiController#common_students as */*
Completed 204 No Content in 20290ms (ActiveRecord: 0.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:45:17 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
Completed 204 No Content in 347216ms (ActiveRecord: 0.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:51:11 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 500 Internal Server Error in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms)


  
NoMethodError (undefined method `students' for nil:NilClass):
  
app/controllers/api_controller.rb:39:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:51:31 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 500 Internal Server Error in 41968ms (Views: 0.2ms | ActiveRecord: 1.6ms)


  
NoMethodError (undefined method `students' for nil:NilClass):
  
app/controllers/api_controller.rb:40:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40example.com" for 127.0.0.1 at 2019-02-02 06:52:15 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@example.com"}
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 400 Bad Request in 7ms (Views: 0.1ms | ActiveRecord: 2.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 06:52:50 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 500 Internal Server Error in 60579ms (ActiveRecord: 8.6ms)


  
ActiveRecord::HasManyThroughAssociationNotFoundError (Could not find the association :registrations in model Teacher):
  
app/controllers/api_controller.rb:41:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 06:53:56 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 500 Internal Server Error in 76140ms (ActiveRecord: 10.7ms)


  
ActiveRecord::HasManyThroughAssociationNotFoundError (Could not find the association :registrations in model Teacher):
  
app/controllers/api_controller.rb:41:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 06:55:15 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 500 Internal Server Error in 30014ms (ActiveRecord: 9.5ms)


  
NameError (uninitialized constant Teacher::Registrations):
  
app/controllers/api_controller.rb:41:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 06:55:48 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1 LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 200 OK in 9438ms (Views: 2.9ms | ActiveRecord: 19.9ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 06:56:27 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1 LIMIT 11[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mStudent Load (28.8ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ (byebug):1
Completed 200 OK in 208956ms (Views: 0.8ms | ActiveRecord: 29.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 07:00:00 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 200 OK in 1635ms (Views: 0.2ms | ActiveRecord: 19.9ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:01:35 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe%4\n0example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:34
Completed 400 Bad Request in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:01:51 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 07:03:25 +0800
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe%4\n0example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
Completed 400 Bad Request in 93391ms (Views: 0.1ms | ActiveRecord: 2.3ms)


Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherdan@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherdan@gmail.com', '2019-02-01 23:03:25', '2019-02-01 23:03:25')[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[35m (92.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:55
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentron@example.com', FALSE, '2019-02-01 23:03:25', '2019-02-01 23:03:25')[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 2)[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:71
Completed 204 No Content in 205ms (ActiveRecord: 175.1ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 07:03:27 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherdan@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:52
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[35m (51.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 2)[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:71
Completed 204 No Content in 63ms (ActiveRecord: 55.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 07:03:34 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:42
Completed 200 OK in 6467ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:03:52 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (4.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe%4\n0example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
Completed 400 Bad Request in 519493ms (Views: 0.1ms | ActiveRecord: 4.3ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:12:37 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe%4\n0example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
Completed 400 Bad Request in 2248296ms (Views: 0.1ms | ActiveRecord: 11.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:50:08 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
Completed 500 Internal Server Error in 88ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `a' for #<ApiController:0x00007fd04fa4fc78>):
  
app/controllers/api_controller.rb:33:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:50:17 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
Completed 500 Internal Server Error in 88933ms (ActiveRecord: 0.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/api_controller.rb:39:in `[]'
app/controllers/api_controller.rb:39:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:51:51 +0800
  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP2/app/controllers/api_controller.rb:76: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/api_controller.rb:76: syntax error, unexpected end-of-input, expecting keyword_end
Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 07:52:01 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:39
Completed 400 Bad Request in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 13:06:37 +0800
  [1m[35m (61.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (4.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (1.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 18077ms (Views: 0.2ms | ActiveRecord: 44.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 13:08:21 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 3584ms (Views: 0.2ms | ActiveRecord: 41.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 13:08:51 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.8ms)


Started GET "/api/commonstudents?teacher=teacherken%40example.com&teacher=teacherjoe%254%0A0example.com" for 127.0.0.1 at 2019-02-02 13:09:07 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0example.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 2.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:10:13 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 69ms (Views: 0.1ms | ActiveRecord: 60.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:10:16 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 13:10:55 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[36mTeacher Create (3.8ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherjoe@gmail.com', '2019-02-02 05:10:55', '2019-02-02 05:10:55')[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:61
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mRegistration Create (0.7ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 3)[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[35m (40.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 3)[0m
  â†³ app/controllers/api_controller.rb:77
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:77
Completed 204 No Content in 109ms (ActiveRecord: 69.4ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:10:59 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:41
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 3[0m
  â†³ app/controllers/api_controller.rb:48
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 0.9ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:23:52 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:35
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 3[0m
  â†³ app/controllers/api_controller.rb:42
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 20.9ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:25:19 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:36
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 3[0m
  â†³ app/controllers/api_controller.rb:43
Completed 200 OK in 566853ms (Views: 0.2ms | ActiveRecord: 20.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 13:34:49 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:85
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:90
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:85
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 3[0m
  â†³ app/controllers/api_controller.rb:90
Completed 200 OK in 41ms (Views: 0.1ms | ActiveRecord: 21.4ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 13:52:18 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:71
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:80
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:83
  [1m[36mStudent Create (0.5ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentmary@example.com', FALSE, '2019-02-02 05:52:18', '2019-02-02 05:52:18')[0m
  â†³ app/controllers/api_controller.rb:83
  [1m[35m (85.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:83
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:90
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:90
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:90
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (4, 1)[0m
  â†³ app/controllers/api_controller.rb:90
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:90
Completed 204 No Content in 156ms (ActiveRecord: 124.7ms)


Started POST "/api/suspend" for 127.0.0.1 at 2019-02-02 13:53:01 +0800
Processing by ApiController#suspend as */*
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[36mStudent Update (0.5ms)[0m  [1m[33mUPDATE `students` SET `is_suspended` = TRUE, `updated_at` = '2019-02-02 05:53:01' WHERE `students`.`id` = 4[0m
  â†³ app/controllers/api_controller.rb:57
  [1m[35m (35.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:57
Completed 204 No Content in 40ms (ActiveRecord: 36.5ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:02:33 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#retrievefornotifications as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `length' for nil:NilClass):
  
app/controllers/api_controller.rb:61:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:03:45 +0800
Processing by ApiController#retrievefornotifications as */*
Completed 500 Internal Server Error in 21163ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `length' for nil:NilClass):
  
app/controllers/api_controller.rb:62:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:04:10 +0800
Processing by ApiController#retrievefornotifications as */*
Completed 204 No Content in 350814ms (ActiveRecord: 0.0ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:10:07 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 8ms (Views: 0.2ms | ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `email' for nil:NilClass):
  
app/controllers/api_controller.rb:70:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:10:29 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 81ms (Views: 0.1ms | ActiveRecord: 2.3ms)


  
NameError (undefined local variable or method `teacher' for #<ApiController:0x00007ff60b490ff8>
Did you mean?  @teacher):
  
app/controllers/api_controller.rb:70:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:10:51 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 7ms (Views: 0.1ms | ActiveRecord: 1.9ms)


  
NoMethodError (undefined method `email' for nil:NilClass):
  
app/controllers/api_controller.rb:70:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:11:05 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 93347ms (Views: 0.2ms | ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `email' for nil:NilClass):
  
app/controllers/api_controller.rb:71:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:12:41 +0800
Processing by ApiController#retrievefornotifications as */*
Completed 500 Internal Server Error in 67ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `json' for #<ApiController:0x00007ff60b21d640>
Did you mean?  JSON):
  
app/controllers/api_controller.rb:61:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:13:48 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 95ms (ActiveRecord: 2.2ms)


  
NameError (undefined local variable or method `json' for #<ApiController:0x00007ff60619d300>
Did you mean?  @json
               JSON):
  
app/controllers/api_controller.rb:67:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:14:18 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:65
Completed 500 Internal Server Error in 8ms (Views: 0.2ms | ActiveRecord: 1.7ms)


  
NoMethodError (undefined method `email' for nil:NilClass):
  
app/controllers/api_controller.rb:70:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:14:34 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.8ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:66
Completed 500 Internal Server Error in 67961ms (Views: 0.3ms | ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `email' for nil:NilClass):
  
app/controllers/api_controller.rb:71:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:15:57 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.8ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:68
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:121
  [1m[36mStudent Load (0.6ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:126
Completed 500 Internal Server Error in 6906ms (ActiveRecord: 31.0ms)


  
NameError (undefined local variable or method `json' for #<ApiController:0x00007ff6060df558>
Did you mean?  @json
               JSON):
  
app/controllers/api_controller.rb:75:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:16:24 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:120
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:125
Completed 204 No Content in 276180ms (ActiveRecord: 26.3ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:21:03 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:120
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:125
Completed 500 Internal Server Error in 54ms (ActiveRecord: 25.4ms)


  
NoMethodError (undefined method `drop' for "@studentron@example.com":String):
  
app/controllers/api_controller.rb:131:in `block in get_mentioned_students'
app/controllers/api_controller.rb:131:in `map'
app/controllers/api_controller.rb:131:in `get_mentioned_students'
app/controllers/api_controller.rb:74:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:21:46 +0800
  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP/app/controllers/api_controller.rb:131: syntax error, unexpected ':', expecting ']'
                          .map {|word| word.drop[1:]}
                                                   ^):
  
app/controllers/api_controller.rb:131: syntax error, unexpected ':', expecting ']'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 14:22:09 +0800
  
SyntaxError (/Users/melvin/Desktop/GeekInsider-TAP/app/controllers/api_controller.rb:131: syntax error, unexpected ':', expecting ']'
                          .map {|word| word[1:]}
                                              ^):
  
app/controllers/api_controller.rb:131: syntax error, unexpected ':', expecting ']'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 15:51:39 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:120
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:125
Completed 500 Internal Server Error in 185728ms (ActiveRecord: 19.0ms)


  
SystemExit (exit):
  
(byebug):1:in `exit'
(byebug):1:in `get_mentioned_students'
app/controllers/api_controller.rb:133:in `get_mentioned_students'
app/controllers/api_controller.rb:74:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 15:59:57 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:122
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:127
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:134
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:134
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 22.2ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 16:00:13 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:123
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:128
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
Completed 200 OK in 69837ms (Views: 0.4ms | ActiveRecord: 21.6ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 16:01:35 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:123
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:128
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
Completed 500 Internal Server Error in 124ms (ActiveRecord: 21.6ms)


  
NameError (undefined local variable or method `is_suspended' for #<ApiController:0x00007f993f35f748>):
  
app/controllers/api_controller.rb:75:in `block in retrievefornotifications'
app/controllers/api_controller.rb:75:in `select'
app/controllers/api_controller.rb:75:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 16:01:46 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.1ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:123
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:128
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:135
Completed 500 Internal Server Error in 54ms (ActiveRecord: 21.3ms)


  
NoMethodError (undefined method `is_suspended' for "studentjon@example.com":String):
  
app/controllers/api_controller.rb:75:in `block in retrievefornotifications'
app/controllers/api_controller.rb:75:in `select'
app/controllers/api_controller.rb:75:in `retrievefornotifications'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 16:06:36 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:125
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:75
Completed 200 OK in 38900ms (Views: 0.5ms | ActiveRecord: 21.9ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 16:07:41 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:67
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:125
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:75
Completed 200 OK in 2300ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:16:28 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:98
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (125.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
Completed 204 No Content in 185ms (ActiveRecord: 156.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:16:39 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:130
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:49
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.6ms)


  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (80.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (19.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (87.0ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ bin/rails:9
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
Migrating to CreateStudents (20190201210333)
  [1m[35m (49.1ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (8.2ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateTeachers (20190201210343)
  [1m[35m (47.5ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (48.2ms)[0m  [1m[35mCREATE TABLE `students_teachers` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_registration_on_student_id_and_teacher_id`  ON `registration` (`student_id`, `teacher_id`) [0m
  â†³ db/migrate/20190201210402_create_registrations.rb:6
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:24:26', '2019-02-02 08:24:26')[0m
  â†³ bin/rails:9
  [1m[35m (35.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (83.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (108.5ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (130.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (5.0ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateTeachers (20190201210343)
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (4.9ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`))[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`))[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`))[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (156.7ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_registration_on_student_id_and_teacher_id`  ON `registration` (`student_id`, `teacher_id`) [0m
  â†³ db/migrate/20190201210402_create_registrations.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`))[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `student_id` int, `teacher_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`), CONSTRAINT `fk_rails_c60de8c2bc`
FOREIGN KEY (`student_id`)
  REFERENCES `students` (`id`)
, CONSTRAINT `fk_rails_a1e1ceb7c6`
FOREIGN KEY (`teacher_id`)
  REFERENCES `teachers` (`id`)
)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:30:58', '2019-02-02 08:30:58')[0m
  â†³ bin/rails:9
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (147.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (109.4ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (60.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateStudents (20190201210333)
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210333_create_students.rb:3
  [1m[35m (5.3ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_students_on_email`  ON `students` (`email`) [0m
  â†³ db/migrate/20190201210333_create_students.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210333')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateTeachers (20190201210343)
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/migrate/20190201210343_create_teachers.rb:3
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_teachers_on_email`  ON `teachers` (`email`) [0m
  â†³ db/migrate/20190201210343_create_teachers.rb:8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20190201210343')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
Migrating to CreateRegistrations (20190201210402)
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE `registration` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `student_id` int, `teacher_id` int, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_registration_on_student_id`  (`student_id`),  INDEX `index_registration_on_teacher_id`  (`teacher_id`), CONSTRAINT `fk_rails_c60de8c2bc`
FOREIGN KEY (`student_id`)
  REFERENCES `students` (`id`)
, CONSTRAINT `fk_rails_a1e1ceb7c6`
FOREIGN KEY (`teacher_id`)
  REFERENCES `teachers` (`id`)
)[0m
  â†³ db/migrate/20190201210402_create_registrations.rb:3
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:32:50', '2019-02-02 08:32:50')[0m
  â†³ bin/rails:9
  [1m[35m (62.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (74.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (15.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:33:05', '2019-02-02 08:33:05')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:23
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:33:05', '2019-02-02 08:33:05')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:33:38 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:101
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:33:38', '2019-02-02 08:33:38')[0m
  â†³ app/controllers/api_controller.rb:101
  [1m[35m (122.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:101
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:33:38', '2019-02-02 08:33:38')[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (44.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:33:38', '2019-02-02 08:33:38')[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:110
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
Completed 204 No Content in 247ms (ActiveRecord: 205.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:33:39 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:98
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (128.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
Completed 204 No Content in 139ms (ActiveRecord: 131.4ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:33:40 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:98
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:116
Completed 204 No Content in 46ms (ActiveRecord: 39.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:33:44 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:130
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:49
Completed 200 OK in 10ms (Views: 5.2ms | ActiveRecord: 0.7ms)


  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (141.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (13.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (40.0ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (15.2ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:35:41', '2019-02-02 08:35:41')[0m
  â†³ db/schema.rb:13
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:35:41', '2019-02-02 08:35:41')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:36:00 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:130
Completed 500 Internal Server Error in 8ms (Views: 0.3ms | ActiveRecord: 1.7ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:49:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:36:07 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:130
Completed 500 Internal Server Error in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:49:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:36:31 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 6ms (Views: 0.1ms | ActiveRecord: 1.8ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:37:26 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:37:43 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 7ms (Views: 0.2ms | ActiveRecord: 1.7ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:37:52 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 8ms (Views: 0.2ms | ActiveRecord: 1.6ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:40:12 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:43:48 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:44:02 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:44:02', '2019-02-02 08:44:02')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (20.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:44:02', '2019-02-02 08:44:02')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:44:02', '2019-02-02 08:44:02')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 94ms (ActiveRecord: 55.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:44:03 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 12ms (ActiveRecord: 4.5ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:44:03 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 26ms (ActiveRecord: 18.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:44:05 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 0.7ms)


  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (128.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (13.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.0ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:45:10', '2019-02-02 08:45:10')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:45:10', '2019-02-02 08:45:10')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:45:22 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 12ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:45:25 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:45:25', '2019-02-02 08:45:25')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (112.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:45:25', '2019-02-02 08:45:25')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:45:26', '2019-02-02 08:45:26')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 188ms (ActiveRecord: 154.2ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:45:26 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (98.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 110ms (ActiveRecord: 102.0ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:45:28 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 8ms (Views: 4.3ms | ActiveRecord: 0.7ms)


  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (174.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (12.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (15.2ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:45:56', '2019-02-02 08:45:56')[0m
  â†³ db/schema.rb:13
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:45:56', '2019-02-02 08:45:56')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:46:04 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 1.8ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:46:07 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:46:07', '2019-02-02 08:46:07')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (99.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:46:07', '2019-02-02 08:46:07')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:46:07', '2019-02-02 08:46:07')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 173ms (ActiveRecord: 140.2ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:46:07 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (54.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 65ms (ActiveRecord: 57.8ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:46:09 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 9ms (Views: 4.9ms | ActiveRecord: 0.7ms)


  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (99.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (12.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (186.6ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (11.3ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:47:54', '2019-02-02 08:47:54')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:47:54', '2019-02-02 08:47:54')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:48:03 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:48:03 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:48:05 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:48:05', '2019-02-02 08:48:05')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (87.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:48:05', '2019-02-02 08:48:05')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:48:05', '2019-02-02 08:48:05')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 159ms (ActiveRecord: 124.5ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:48:06 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (63.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 74ms (ActiveRecord: 66.9ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:48:08 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 10ms (Views: 5.2ms | ActiveRecord: 0.8ms)


  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (152.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (11.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:49:38', '2019-02-02 08:49:38')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:49:38', '2019-02-02 08:49:38')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:49:48 +0800
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:49:50 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:49:50', '2019-02-02 08:49:50')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (103.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:49:50', '2019-02-02 08:49:50')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:49:51', '2019-02-02 08:49:51')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.1ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 169ms (ActiveRecord: 136.9ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:49:51 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (22.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.6ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 34ms (ActiveRecord: 26.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:49:53 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 0.8ms)


  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (162.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (16.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (40.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (21.3ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:51:29', '2019-02-02 08:51:29')[0m
  â†³ db/schema.rb:13
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:51:29', '2019-02-02 08:51:29')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:51:37 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:51:40 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:51:40', '2019-02-02 08:51:40')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (42.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:51:40', '2019-02-02 08:51:40')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:51:40', '2019-02-02 08:51:40')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 2 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 155ms (ActiveRecord: 117.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:51:42 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 0.8ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:51:46 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 422 Unprocessable Entity in 10ms (ActiveRecord: 1.6ms)


  
ActiveRecord::RecordInvalid (Validation failed: Student has already been taken):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:51:46 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 1.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Student has already been taken):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:52:05 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.2ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherjoe@gmail.com', '2019-02-02 08:52:05', '2019-02-02 08:52:05')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (145.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentron@example.com', FALSE, '2019-02-02 08:52:05', '2019-02-02 08:52:05')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 3 AND `registrations`.`teacher_id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 2 AND `registrations`.`teacher_id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 2)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 164ms (ActiveRecord: 151.4ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:52:09 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 16:52:12 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:47
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:52:43 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 41ms (Views: 7.6ms | ActiveRecord: 20.3ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:52:46 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:52:50 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 422 Unprocessable Entity in 17ms (ActiveRecord: 8.6ms)


  
ActiveRecord::RecordInvalid (Validation failed: Student has already been taken):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:52:51 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 1.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Student has already been taken):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (18.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (13.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:54:10', '2019-02-02 08:54:10')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:20
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:20
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:28
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:28
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 08:54:10', '2019-02-02 08:54:10')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:54:21 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 08:54:21', '2019-02-02 08:54:21')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (123.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 08:54:21', '2019-02-02 08:54:21')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (41.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.6ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 08:54:21', '2019-02-02 08:54:21')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (41.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 284ms (ActiveRecord: 241.7ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:54:21 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (29.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.6ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 41ms (ActiveRecord: 33.5ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:54:22 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (101.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 113ms (ActiveRecord: 104.9ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:54:23 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (72.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 84ms (ActiveRecord: 75.9ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 16:54:23 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (96.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 109ms (ActiveRecord: 100.5ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 16:54:25 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 16:54:56 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
Completed 500 Internal Server Error in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms)


  
TypeError (no implicit conversion of nil into Array):
  
app/controllers/api_controller.rb:47:in `block in common_students'
app/controllers/api_controller.rb:46:in `each'
app/controllers/api_controller.rb:46:in `common_students'
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (98.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_development`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (13.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `GeekInsider-TAP2_test`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_development` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `GeekInsider-TAP2_test` DEFAULT CHARACTER SET `utf8`[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (41.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (189.2ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL, UNIQUE INDEX `index_registration_on_student_id_and_teacher_id`  (`student_id`, `teacher_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:21
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:21
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:29
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:29
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 11:10:57', '2019-02-02 11:10:57')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ db/schema.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `registrations` CASCADE[0m
  â†³ db/schema.rb:15
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE `registrations` (`student_id` bigint NOT NULL, `teacher_id` bigint NOT NULL, UNIQUE INDEX `index_registration_on_student_id_and_teacher_id`  (`student_id`, `teacher_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:15
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS `students` CASCADE[0m
  â†³ db/schema.rb:21
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE `students` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `is_suspended` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_students_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:21
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS `teachers` CASCADE[0m
  â†³ db/schema.rb:29
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `teachers` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `email` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, UNIQUE INDEX `index_teachers_on_email`  (`email`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  â†³ db/schema.rb:29
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20190201210402)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20190201210343),
(20190201210333);

[0m
  â†³ db/schema.rb:13
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ db/schema.rb:13
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2019-02-02 11:10:57', '2019-02-02 11:10:57')[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE `ar_internal_metadata` SET `value` = 'test' WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('3732127230570716775', 0)[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3732127230570716775')[0m
  â†³ /usr/local/bin/rake:22
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /usr/local/bin/rake:22
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:11:11 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
Completed 500 Internal Server Error in 8ms (Views: 0.2ms | ActiveRecord: 1.7ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/api_controller.rb:50:in `common_students'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:11:27 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.3ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherken@gmail.com', '2019-02-02 11:11:27', '2019-02-02 11:11:27')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (115.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentjon@example.com', FALSE, '2019-02-02 11:11:27', '2019-02-02 11:11:27')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studenthon@example.com', FALSE, '2019-02-02 11:11:27', '2019-02-02 11:11:27')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 195ms (ActiveRecord: 159.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:11:28 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.7ms)


  
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '1-1' for key 'index_registration_on_student_id_and_teacher_id': INSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:11:29 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.6ms)


  
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '1-1' for key 'index_registration_on_student_id_and_teacher_id': INSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (1, 1)):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:12:17 +0800
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mTeacher Create (0.2ms)[0m  [1m[32mINSERT INTO `teachers` (`email`, `created_at`, `updated_at`) VALUES ('teacherjoe@gmail.com', '2019-02-02 11:12:17', '2019-02-02 11:12:17')[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[35m (82.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:102
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentron@example.com', FALSE, '2019-02-02 11:12:17', '2019-02-02 11:12:17')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (2, 2)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 99ms (ActiveRecord: 88.2ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:12:18 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 2 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.4ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.7ms)


  
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '3-2' for key 'index_registration_on_student_id_and_teacher_id': INSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (3, 2)):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:12:27 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO `students` (`email`, `is_suspended`, `created_at`, `updated_at`) VALUES ('studentmary@example.com', FALSE, '2019-02-02 11:12:27', '2019-02-02 11:12:27')[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:111
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.7ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.2ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (4, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:117
Completed 204 No Content in 33ms (ActiveRecord: 24.7ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:12:27 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:108
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`id` = 4 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[36mRegistration Create (0.3ms)[0m  [1m[32mINSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (4, 1)[0m
  â†³ app/controllers/api_controller.rb:117
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api_controller.rb:117
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.6ms)


  
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '4-1' for key 'index_registration_on_student_id_and_teacher_id': INSERT INTO `registrations` (`student_id`, `teacher_id`) VALUES (4, 1)):
  
app/controllers/api_controller.rb:117:in `register_student_to_teacher'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:12:33 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 13ms (Views: 4.9ms | ActiveRecord: 0.8ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 19:12:38 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:47
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 1.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:13:10 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 19:13:13 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:47
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 1.1ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 19:14:31 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:47
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 20.4ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:14:34 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started POST "/api/suspend" for 127.0.0.1 at 2019-02-02 19:14:39 +0800
Processing by ApiController#suspend as */*
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[36mStudent Update (0.3ms)[0m  [1m[33mUPDATE `students` SET `is_suspended` = TRUE, `updated_at` = '2019-02-02 11:14:39' WHERE `students`.`id` = 4[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[35m (132.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:64
Completed 204 No Content in 137ms (ActiveRecord: 133.3ms)


Started POST "/api/suspend" for 127.0.0.1 at 2019-02-02 19:14:41 +0800
Processing by ApiController#suspend as */*
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:64
Completed 204 No Content in 2ms (ActiveRecord: 0.6ms)


Started POST "/api/suspend" for 127.0.0.1 at 2019-02-02 19:14:42 +0800
Processing by ApiController#suspend as */*
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentmary@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api_controller.rb:64
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api_controller.rb:64
Completed 204 No Content in 2ms (ActiveRecord: 0.6ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:14:45 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:14:45 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:14:48 +0800
Processing by ApiController#retrievefornotifications as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
JSON::ParserError (A JSON text must at least contain two octets!):
  
app/controllers/api_controller.rb:95:in `parse_request'
Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:14:59 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:15:05 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:15:06 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:15:09 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentron@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentagnes@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:143
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started POST "/api/retrievefornotifications" for 127.0.0.1 at 2019-02-02 19:15:11 +0800
Processing by ApiController#retrievefornotifications as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:72
  [1m[36mCACHE Teacher Load (0.0ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m  [["email", "teacherken@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api_controller.rb:131
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:81
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:27:06 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:106
Completed 500 Internal Server Error in 78ms (ActiveRecord: 18.6ms)


  
NoMethodError (undefined method `register_student_to_teacher' for #<ApiController:0x00007fd9b17d84e8>):
  
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:27:24 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:106
Completed 500 Internal Server Error in 41ms (ActiveRecord: 20.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:113:in `find_or_create_registration'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:28:18 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:106
Completed 500 Internal Server Error in 6846ms (ActiveRecord: 18.8ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/api_controller.rb:114:in `find_or_create_registration'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:29:00 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
Completed 500 Internal Server Error in 7349ms (ActiveRecord: 27.4ms)


  
ActiveRecord::UnknownPrimaryKey (Unknown primary key for table registrations in model Registration.):
  
app/controllers/api_controller.rb:116:in `find_or_create_registration'
app/controllers/api_controller.rb:18:in `block in register'
app/controllers/api_controller.rb:16:in `each'
app/controllers/api_controller.rb:16:in `register'
Started POST "/api/register" for 127.0.0.1 at 2019-02-02 19:30:17 +0800
Processing by ApiController#register as */*
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:99
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studentjon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[36mRegistration Load (0.4ms)[0m  [1m[34mSELECT  `registrations`.* FROM `registrations` WHERE `registrations`.`student_id` = 1 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT  `students`.* FROM `students` WHERE `students`.`email` = 'studenthon@example.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:107
  [1m[36mRegistration Load (0.5ms)[0m  [1m[34mSELECT  `registrations`.* FROM `registrations` WHERE `registrations`.`student_id` = 2 AND `registrations`.`teacher_id` = 1 LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:116
Completed 204 No Content in 7674ms (ActiveRecord: 28.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:34:46 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:133
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 19.3ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com" for 127.0.0.1 at 2019-02-02 19:34:47 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherken@gmail.com"}
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:133
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%254%0A0gmail.com" for 127.0.0.1 at 2019-02-02 19:34:49 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherjoe%4\n0gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:133
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:133
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:47
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:47
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.2ms)


Started GET "/api/commonstudents?teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:35:23 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:133
Completed 500 Internal Server Error in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `students' for nil:NilClass):
  
app/controllers/api_controller.rb:137:in `find_students'
app/controllers/api_controller.rb:45:in `common_students'
Started GET "/api/commonstudents?teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:36:01 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.8ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:134
Completed 500 Internal Server Error in 108778ms (Views: 1.6ms | ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `students' for nil:NilClass):
  
app/controllers/api_controller.rb:138:in `find_students'
app/controllers/api_controller.rb:45:in `common_students'
Started GET "/api/commonstudents?teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:37:52 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:134
Completed 500 Internal Server Error in 9089ms (Views: 1.2ms | ActiveRecord: 2.4ms)


  
NoMethodError (undefined method `students' for nil:NilClass):
  
app/controllers/api_controller.rb:138:in `find_students'
app/controllers/api_controller.rb:45:in `common_students'
Started GET "/api/commonstudents?teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:43:57 +0800
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.8ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
Completed 400 Bad Request in 14481ms (Views: 1.2ms | ActiveRecord: 2.6ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%40gmail.com&teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:45:03 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
  [1m[36mStudent Load (0.5ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:48
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:48
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
Completed 500 Internal Server Error in 8536ms (Views: 0.2ms | ActiveRecord: 23.0ms)


  
TypeError (no implicit conversion of nil into Array):
  
app/controllers/api_controller.rb:48:in `&'
app/controllers/api_controller.rb:48:in `block in common_students'
app/controllers/api_controller.rb:47:in `each'
app/controllers/api_controller.rb:47:in `common_students'
Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%40gmail.com&teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:48:09 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:50
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:50
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
Completed 400 Bad Request in 3359ms (Views: 0.2ms | ActiveRecord: 23.7ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%40gmail.com&teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:51:54 +0800
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  â†³ /Library/Ruby/Gems/2.3.0/gems/activerecord-5.2.2/lib/active_record/log_subscriber.rb:98
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.4ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:46
  [1m[36mTeacher Load (0.6ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
  [1m[36mStudent Load (0.4ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[36mTeacher Load (0.5ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:137
Completed 400 Bad Request in 4091ms (Views: 0.2ms | ActiveRecord: 21.2ms)


Started GET "/api/commonstudents?teacher=teacherken%40gmail.com&teacher=teacherjoe%40gmail.com&teacher=teacherpau%40gmail.com" for 127.0.0.1 at 2019-02-02 19:52:36 +0800
Processing by ApiController#common_students as */*
  Parameters: {"teacher"=>"teacherpau@gmail.com"}
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherken@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 1[0m
  â†³ app/controllers/api_controller.rb:46
  [1m[36mTeacher Load (0.3ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherjoe@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT `students`.* FROM `students` INNER JOIN `registrations` ON `students`.`id` = `registrations`.`student_id` WHERE `registrations`.`teacher_id` = 2[0m
  â†³ app/controllers/api_controller.rb:49
  [1m[36mTeacher Load (0.2ms)[0m  [1m[34mSELECT  `teachers`.* FROM `teachers` WHERE `teachers`.`email` = 'teacherpau@gmail.com' LIMIT 1[0m
  â†³ app/controllers/api_controller.rb:136
Completed 400 Bad Request in 45ms (Views: 0.2ms | ActiveRecord: 22.2ms)


